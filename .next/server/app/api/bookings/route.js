"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/bookings/route";
exports.ids = ["app/api/bookings/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbookings%2Froute&page=%2Fapi%2Fbookings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbookings%2Froute.js&appDir=%2FUsers%2Fmeritsaturyan%2FDesktop%2Fanihambardzumyan%2Fani-hambardzumian-studios%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmeritsaturyan%2FDesktop%2Fanihambardzumyan%2Fani-hambardzumian-studios&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbookings%2Froute&page=%2Fapi%2Fbookings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbookings%2Froute.js&appDir=%2FUsers%2Fmeritsaturyan%2FDesktop%2Fanihambardzumyan%2Fani-hambardzumian-studios%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmeritsaturyan%2FDesktop%2Fanihambardzumyan%2Fani-hambardzumian-studios&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_meritsaturyan_Desktop_anihambardzumyan_ani_hambardzumian_studios_app_api_bookings_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/bookings/route.js */ \"(rsc)/./app/api/bookings/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/bookings/route\",\n        pathname: \"/api/bookings\",\n        filename: \"route\",\n        bundlePath: \"app/api/bookings/route\"\n    },\n    resolvedPagePath: \"/Users/meritsaturyan/Desktop/anihambardzumyan/ani-hambardzumian-studios/app/api/bookings/route.js\",\n    nextConfigOutput,\n    userland: _Users_meritsaturyan_Desktop_anihambardzumyan_ani_hambardzumian_studios_app_api_bookings_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/bookings/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZib29raW5ncyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYm9va2luZ3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZib29raW5ncyUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRm1lcml0c2F0dXJ5YW4lMkZEZXNrdG9wJTJGYW5paGFtYmFyZHp1bXlhbiUyRmFuaS1oYW1iYXJkenVtaWFuLXN0dWRpb3MlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWVyaXRzYXR1cnlhbiUyRkRlc2t0b3AlMkZhbmloYW1iYXJkenVteWFuJTJGYW5pLWhhbWJhcmR6dW1pYW4tc3R1ZGlvcyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUQ7QUFDOUg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmktaGFtYmFyZHp1bWlhbi1zdHVkaW9zLz8zYjkwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9tZXJpdHNhdHVyeWFuL0Rlc2t0b3AvYW5paGFtYmFyZHp1bXlhbi9hbmktaGFtYmFyZHp1bWlhbi1zdHVkaW9zL2FwcC9hcGkvYm9va2luZ3Mvcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2Jvb2tpbmdzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYm9va2luZ3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2Jvb2tpbmdzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL21lcml0c2F0dXJ5YW4vRGVza3RvcC9hbmloYW1iYXJkenVteWFuL2FuaS1oYW1iYXJkenVtaWFuLXN0dWRpb3MvYXBwL2FwaS9ib29raW5ncy9yb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYm9va2luZ3Mvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbookings%2Froute&page=%2Fapi%2Fbookings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbookings%2Froute.js&appDir=%2FUsers%2Fmeritsaturyan%2FDesktop%2Fanihambardzumyan%2Fani-hambardzumian-studios%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmeritsaturyan%2FDesktop%2Fanihambardzumyan%2Fani-hambardzumian-studios&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/bookings/route.js":
/*!***********************************!*\
  !*** ./app/api/bookings/route.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_pavilions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/pavilions */ \"(rsc)/./lib/pavilions.js\");\n/* harmony import */ var _lib_bookings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/bookings */ \"(rsc)/./lib/bookings.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/auth */ \"(rsc)/./lib/auth.js\");\n\n\n\n\n\nconst bookingSchema = zod__WEBPACK_IMPORTED_MODULE_4__.object({\n    pavilionSlug: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1),\n    date: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1),\n    startTime: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1),\n    endTime: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1),\n    customerName: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1),\n    phone: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1),\n    email: zod__WEBPACK_IMPORTED_MODULE_4__.string().email(),\n    notes: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n    extras: zod__WEBPACK_IMPORTED_MODULE_4__.record(zod__WEBPACK_IMPORTED_MODULE_4__.any()).optional()\n});\nasync function GET(request) {\n    const isAdmin = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.parseAdminFromRequest)(request.headers);\n    if (!isAdmin) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n    }\n    const { searchParams } = new URL(request.url);\n    const from = searchParams.get(\"from\") || undefined;\n    const to = searchParams.get(\"to\") || undefined;\n    const pavilionId = searchParams.get(\"pavilionId\") || undefined;\n    try {\n        const bookings = await (0,_lib_bookings__WEBPACK_IMPORTED_MODULE_2__.listBookings)({\n            fromDate: from,\n            toDate: to,\n            pavilionId: pavilionId ? Number(pavilionId) : undefined\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            bookings\n        });\n    } catch (err) {\n        console.error(\"GET /api/bookings error:\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to load bookings\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const parsed = bookingSchema.safeParse(body);\n        if (!parsed.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid data\",\n                details: parsed.error.flatten()\n            }, {\n                status: 400\n            });\n        }\n        const { pavilionSlug, date, startTime, endTime, customerName, phone, email, notes, extras } = parsed.data;\n        const pavilion = await (0,_lib_pavilions__WEBPACK_IMPORTED_MODULE_1__.getPavilionBySlug)(pavilionSlug);\n        if (!pavilion) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Pavilion not found\"\n            }, {\n                status: 404\n            });\n        }\n        const conflict = await (0,_lib_bookings__WEBPACK_IMPORTED_MODULE_2__.hasBookingConflict)({\n            pavilionId: pavilion.id,\n            date,\n            startTime,\n            endTime\n        });\n        if (conflict) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"This time slot is not available\"\n            }, {\n                status: 409\n            });\n        }\n        const startHour = Number(startTime.split(\":\")[0]);\n        const endHour = Number(endTime.split(\":\")[0]);\n        const hours = Math.max(0, endHour - startHour);\n        const basePrice = Number(pavilion.price_per_hour) * hours;\n        let extrasTotal = 0;\n        if (extras) {\n            if (extras.lightingPackage) extrasTotal += 10000;\n            if (extras.extraBackdrop) extrasTotal += 5000;\n        }\n        const totalPrice = basePrice + extrasTotal;\n        const booking = await (0,_lib_bookings__WEBPACK_IMPORTED_MODULE_2__.createBooking)({\n            pavilionId: pavilion.id,\n            date,\n            startTime,\n            endTime,\n            totalPrice,\n            customerName,\n            phone,\n            email,\n            notes,\n            extras\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            booking\n        });\n    } catch (err) {\n        console.error(\"POST /api/bookings error:\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create booking\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxHQUMzQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTTBCLFlBQVlkLE9BQU81QixVQUFVMkMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2hELE1BQU1DLFVBQVVoQixPQUFPM0IsUUFBUTBDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUM1QyxNQUFNRSxRQUFRQyxLQUFLQyxHQUFHLENBQUMsR0FBR0gsVUFBVUY7UUFDcEMsTUFBTU0sWUFBWXBCLE9BQU9XLFNBQVNVLGNBQWMsSUFBSUo7UUFFcEQsSUFBSUssY0FBYztRQUNsQixJQUFJM0MsUUFBUTtZQUNWLElBQUlBLE9BQU80QyxlQUFlLEVBQUVELGVBQWU7WUFDM0MsSUFBSTNDLE9BQU82QyxhQUFhLEVBQUVGLGVBQWU7UUFDM0M7UUFFQSxNQUFNRyxhQUFhTCxZQUFZRTtRQUUvQixNQUFNSSxVQUFVLE1BQU0vRCw0REFBYUEsQ0FBQztZQUNsQ2lDLFlBQVllLFNBQVNFLEVBQUU7WUFDdkIxQztZQUNBQztZQUNBQztZQUNBb0Q7WUFDQW5EO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FFO1FBQ0Y7UUFFQSxPQUFPcEIscURBQVlBLENBQUMyQixJQUFJLENBQUM7WUFBRXdDO1FBQVE7SUFDckMsRUFBRSxPQUFPekIsS0FBSztRQUNaQyxRQUFRZixLQUFLLENBQUMsNkJBQTZCYztRQUMzQyxPQUFPMUMscURBQVlBLENBQUMyQixJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBMkIsR0FDcEM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmktaGFtYmFyZHp1bWlhbi1zdHVkaW9zLy4vYXBwL2FwaS9ib29raW5ncy9yb3V0ZS5qcz83NDMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGdldFBhdmlsaW9uQnlTbHVnIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9wYXZpbGlvbnNcIjtcbmltcG9ydCB7IGhhc0Jvb2tpbmdDb25mbGljdCwgY3JlYXRlQm9va2luZywgbGlzdEJvb2tpbmdzIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9ib29raW5nc1wiO1xuaW1wb3J0IHsgcGFyc2VBZG1pbkZyb21SZXF1ZXN0IH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9hdXRoXCI7XG5cbmNvbnN0IGJvb2tpbmdTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHBhdmlsaW9uU2x1Zzogei5zdHJpbmcoKS5taW4oMSksXG4gIGRhdGU6IHouc3RyaW5nKCkubWluKDEpLFxuICBzdGFydFRpbWU6IHouc3RyaW5nKCkubWluKDEpLFxuICBlbmRUaW1lOiB6LnN0cmluZygpLm1pbigxKSxcbiAgY3VzdG9tZXJOYW1lOiB6LnN0cmluZygpLm1pbigxKSxcbiAgcGhvbmU6IHouc3RyaW5nKCkubWluKDEpLFxuICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgpLFxuICBub3Rlczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBleHRyYXM6IHoucmVjb3JkKHouYW55KCkpLm9wdGlvbmFsKClcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcbiAgY29uc3QgaXNBZG1pbiA9IHBhcnNlQWRtaW5Gcm9tUmVxdWVzdChyZXF1ZXN0LmhlYWRlcnMpO1xuICBpZiAoIWlzQWRtaW4pIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuICB9XG5cbiAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICBjb25zdCBmcm9tID0gc2VhcmNoUGFyYW1zLmdldChcImZyb21cIikgfHwgdW5kZWZpbmVkO1xuICBjb25zdCB0byA9IHNlYXJjaFBhcmFtcy5nZXQoXCJ0b1wiKSB8fCB1bmRlZmluZWQ7XG4gIGNvbnN0IHBhdmlsaW9uSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KFwicGF2aWxpb25JZFwiKSB8fCB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBib29raW5ncyA9IGF3YWl0IGxpc3RCb29raW5ncyh7XG4gICAgICBmcm9tRGF0ZTogZnJvbSxcbiAgICAgIHRvRGF0ZTogdG8sXG4gICAgICBwYXZpbGlvbklkOiBwYXZpbGlvbklkID8gTnVtYmVyKHBhdmlsaW9uSWQpIDogdW5kZWZpbmVkXG4gICAgfSk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgYm9va2luZ3MgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJHRVQgL2FwaS9ib29raW5ncyBlcnJvcjpcIiwgZXJyKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBcIkZhaWxlZCB0byBsb2FkIGJvb2tpbmdzXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCBwYXJzZWQgPSBib29raW5nU2NoZW1hLnNhZmVQYXJzZShib2R5KTtcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiSW52YWxpZCBkYXRhXCIsIGRldGFpbHM6IHBhcnNlZC5lcnJvci5mbGF0dGVuKCkgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIHBhdmlsaW9uU2x1ZyxcbiAgICAgIGRhdGUsXG4gICAgICBzdGFydFRpbWUsXG4gICAgICBlbmRUaW1lLFxuICAgICAgY3VzdG9tZXJOYW1lLFxuICAgICAgcGhvbmUsXG4gICAgICBlbWFpbCxcbiAgICAgIG5vdGVzLFxuICAgICAgZXh0cmFzXG4gICAgfSA9IHBhcnNlZC5kYXRhO1xuXG4gICAgY29uc3QgcGF2aWxpb24gPSBhd2FpdCBnZXRQYXZpbGlvbkJ5U2x1ZyhwYXZpbGlvblNsdWcpO1xuICAgIGlmICghcGF2aWxpb24pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJQYXZpbGlvbiBub3QgZm91bmRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgY29uZmxpY3QgPSBhd2FpdCBoYXNCb29raW5nQ29uZmxpY3Qoe1xuICAgICAgcGF2aWxpb25JZDogcGF2aWxpb24uaWQsXG4gICAgICBkYXRlLFxuICAgICAgc3RhcnRUaW1lLFxuICAgICAgZW5kVGltZVxuICAgIH0pO1xuXG4gICAgaWYgKGNvbmZsaWN0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiVGhpcyB0aW1lIHNsb3QgaXMgbm90IGF2YWlsYWJsZVwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDkgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydEhvdXIgPSBOdW1iZXIoc3RhcnRUaW1lLnNwbGl0KFwiOlwiKVswXSk7XG4gICAgY29uc3QgZW5kSG91ciA9IE51bWJlcihlbmRUaW1lLnNwbGl0KFwiOlwiKVswXSk7XG4gICAgY29uc3QgaG91cnMgPSBNYXRoLm1heCgwLCBlbmRIb3VyIC0gc3RhcnRIb3VyKTtcbiAgICBjb25zdCBiYXNlUHJpY2UgPSBOdW1iZXIocGF2aWxpb24ucHJpY2VfcGVyX2hvdXIpICogaG91cnM7XG5cbiAgICBsZXQgZXh0cmFzVG90YWwgPSAwO1xuICAgIGlmIChleHRyYXMpIHtcbiAgICAgIGlmIChleHRyYXMubGlnaHRpbmdQYWNrYWdlKSBleHRyYXNUb3RhbCArPSAxMDAwMDtcbiAgICAgIGlmIChleHRyYXMuZXh0cmFCYWNrZHJvcCkgZXh0cmFzVG90YWwgKz0gNTAwMDtcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbFByaWNlID0gYmFzZVByaWNlICsgZXh0cmFzVG90YWw7XG5cbiAgICBjb25zdCBib29raW5nID0gYXdhaXQgY3JlYXRlQm9va2luZyh7XG4gICAgICBwYXZpbGlvbklkOiBwYXZpbGlvbi5pZCxcbiAgICAgIGRhdGUsXG4gICAgICBzdGFydFRpbWUsXG4gICAgICBlbmRUaW1lLFxuICAgICAgdG90YWxQcmljZSxcbiAgICAgIGN1c3RvbWVyTmFtZSxcbiAgICAgIHBob25lLFxuICAgICAgZW1haWwsXG4gICAgICBub3RlcyxcbiAgICAgIGV4dHJhc1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgYm9va2luZyB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlBPU1QgL2FwaS9ib29raW5ncyBlcnJvcjpcIiwgZXJyKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBcIkZhaWxlZCB0byBjcmVhdGUgYm9va2luZ1wiIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwieiIsImdldFBhdmlsaW9uQnlTbHVnIiwiaGFzQm9va2luZ0NvbmZsaWN0IiwiY3JlYXRlQm9va2luZyIsImxpc3RCb29raW5ncyIsInBhcnNlQWRtaW5Gcm9tUmVxdWVzdCIsImJvb2tpbmdTY2hlbWEiLCJvYmplY3QiLCJwYXZpbGlvblNsdWciLCJzdHJpbmciLCJtaW4iLCJkYXRlIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImN1c3RvbWVyTmFtZSIsInBob25lIiwiZW1haWwiLCJub3RlcyIsIm9wdGlvbmFsIiwiZXh0cmFzIiwicmVjb3JkIiwiYW55IiwiR0VUIiwicmVxdWVzdCIsImlzQWRtaW4iLCJoZWFkZXJzIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZnJvbSIsImdldCIsInVuZGVmaW5lZCIsInRvIiwicGF2aWxpb25JZCIsImJvb2tpbmdzIiwiZnJvbURhdGUiLCJ0b0RhdGUiLCJOdW1iZXIiLCJlcnIiLCJjb25zb2xlIiwiUE9TVCIsImJvZHkiLCJwYXJzZWQiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiZGV0YWlscyIsImZsYXR0ZW4iLCJkYXRhIiwicGF2aWxpb24iLCJjb25mbGljdCIsImlkIiwic3RhcnRIb3VyIiwic3BsaXQiLCJlbmRIb3VyIiwiaG91cnMiLCJNYXRoIiwibWF4IiwiYmFzZVByaWNlIiwicHJpY2VfcGVyX2hvdXIiLCJleHRyYXNUb3RhbCIsImxpZ2h0aW5nUGFja2FnZSIsImV4dHJhQmFja2Ryb3AiLCJ0b3RhbFByaWNlIiwiYm9va2luZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/bookings/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAdminCookieHeader: () => (/* binding */ createAdminCookieHeader),\n/* harmony export */   createAdminSessionToken: () => (/* binding */ createAdminSessionToken),\n/* harmony export */   parseAdminFromRequest: () => (/* binding */ parseAdminFromRequest),\n/* harmony export */   verifyAdminSessionToken: () => (/* binding */ verifyAdminSessionToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/cookie/index.js\");\n\n\nconst COOKIE_NAME = \"admin_session\";\nfunction createAdminSessionToken() {\n    const secret = process.env.ADMIN_SESSION_SECRET;\n    if (!secret) {\n        throw new Error(\"ADMIN_SESSION_SECRET is not set\");\n    }\n    const payload = {\n        role: \"admin\"\n    };\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__.sign(payload, secret, {\n        expiresIn: \"7d\"\n    });\n}\nfunction verifyAdminSessionToken(token) {\n    const secret = process.env.ADMIN_SESSION_SECRET;\n    if (!secret) {\n        throw new Error(\"ADMIN_SESSION_SECRET is not set\");\n    }\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__.verify(token, secret);\n        return decoded && decoded.role === \"admin\";\n    } catch (e) {\n        return false;\n    }\n}\nfunction createAdminCookieHeader(token) {\n    return cookie__WEBPACK_IMPORTED_MODULE_1__.serialize(COOKIE_NAME, token, {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        path: \"/\",\n        maxAge: 60 * 60 * 24 * 7\n    });\n}\nfunction parseAdminFromRequest(headers) {\n    const cookieHeader = headers.get(\"cookie\");\n    if (!cookieHeader) return false;\n    const cookies = cookie__WEBPACK_IMPORTED_MODULE_1__.parse(cookieHeader || \"\");\n    const token = cookies[COOKIE_NAME];\n    if (!token) return false;\n    return verifyAdminSessionToken(token);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBK0I7QUFDSDtBQUU1QixNQUFNRSxjQUFjO0FBRWIsU0FBU0M7SUFDZCxNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLG9CQUFvQjtJQUMvQyxJQUFJLENBQUNILFFBQVE7UUFDWCxNQUFNLElBQUlJLE1BQU07SUFDbEI7SUFFQSxNQUFNQyxVQUFVO1FBQ2RDLE1BQU07SUFDUjtJQUVBLE9BQU9WLDhDQUFRLENBQUNTLFNBQVNMLFFBQVE7UUFBRVEsV0FBVztJQUFLO0FBQ3JEO0FBRU8sU0FBU0Msd0JBQXdCQyxLQUFLO0lBQzNDLE1BQU1WLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0Msb0JBQW9CO0lBQy9DLElBQUksQ0FBQ0gsUUFBUTtRQUNYLE1BQU0sSUFBSUksTUFBTTtJQUNsQjtJQUVBLElBQUk7UUFDRixNQUFNTyxVQUFVZixnREFBVSxDQUFDYyxPQUFPVjtRQUNsQyxPQUFPVyxXQUFXQSxRQUFRTCxJQUFJLEtBQUs7SUFDckMsRUFBRSxPQUFPTyxHQUFHO1FBQ1YsT0FBTztJQUNUO0FBQ0Y7QUFFTyxTQUFTQyx3QkFBd0JKLEtBQUs7SUFDM0MsT0FBT2IsNkNBQWdCLENBQUNDLGFBQWFZLE9BQU87UUFDMUNNLFVBQVU7UUFDVkMsUUFBUWhCLGtCQUF5QjtRQUNqQ2lCLFVBQVU7UUFDVkMsTUFBTTtRQUNOQyxRQUFRLEtBQUssS0FBSyxLQUFLO0lBQ3pCO0FBQ0Y7QUFFTyxTQUFTQyxzQkFBc0JDLE9BQU87SUFDM0MsTUFBTUMsZUFBZUQsUUFBUUUsR0FBRyxDQUFDO0lBQ2pDLElBQUksQ0FBQ0QsY0FBYyxPQUFPO0lBRTFCLE1BQU1FLFVBQVU1Qix5Q0FBWSxDQUFDMEIsZ0JBQWdCO0lBQzdDLE1BQU1iLFFBQVFlLE9BQU8sQ0FBQzNCLFlBQVk7SUFDbEMsSUFBSSxDQUFDWSxPQUFPLE9BQU87SUFFbkIsT0FBT0Qsd0JBQXdCQztBQUNqQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FuaS1oYW1iYXJkenVtaWFuLXN0dWRpb3MvLi9saWIvYXV0aC5qcz8yODdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5cbmNvbnN0IENPT0tJRV9OQU1FID0gXCJhZG1pbl9zZXNzaW9uXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZG1pblNlc3Npb25Ub2tlbigpIHtcbiAgY29uc3Qgc2VjcmV0ID0gcHJvY2Vzcy5lbnYuQURNSU5fU0VTU0lPTl9TRUNSRVQ7XG4gIGlmICghc2VjcmV0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQURNSU5fU0VTU0lPTl9TRUNSRVQgaXMgbm90IHNldFwiKTtcbiAgfVxuXG4gIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgcm9sZTogXCJhZG1pblwiXG4gIH07XG5cbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIHNlY3JldCwgeyBleHBpcmVzSW46IFwiN2RcIiB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeUFkbWluU2Vzc2lvblRva2VuKHRva2VuKSB7XG4gIGNvbnN0IHNlY3JldCA9IHByb2Nlc3MuZW52LkFETUlOX1NFU1NJT05fU0VDUkVUO1xuICBpZiAoIXNlY3JldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkFETUlOX1NFU1NJT05fU0VDUkVUIGlzIG5vdCBzZXRcIik7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBzZWNyZXQpO1xuICAgIHJldHVybiBkZWNvZGVkICYmIGRlY29kZWQucm9sZSA9PT0gXCJhZG1pblwiO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZG1pbkNvb2tpZUhlYWRlcih0b2tlbikge1xuICByZXR1cm4gY29va2llLnNlcmlhbGl6ZShDT09LSUVfTkFNRSwgdG9rZW4sIHtcbiAgICBodHRwT25seTogdHJ1ZSxcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIixcbiAgICBzYW1lU2l0ZTogXCJsYXhcIixcbiAgICBwYXRoOiBcIi9cIixcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDdcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFkbWluRnJvbVJlcXVlc3QoaGVhZGVycykge1xuICBjb25zdCBjb29raWVIZWFkZXIgPSBoZWFkZXJzLmdldChcImNvb2tpZVwiKTtcbiAgaWYgKCFjb29raWVIZWFkZXIpIHJldHVybiBmYWxzZTtcblxuICBjb25zdCBjb29raWVzID0gY29va2llLnBhcnNlKGNvb2tpZUhlYWRlciB8fCBcIlwiKTtcbiAgY29uc3QgdG9rZW4gPSBjb29raWVzW0NPT0tJRV9OQU1FXTtcbiAgaWYgKCF0b2tlbikgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiB2ZXJpZnlBZG1pblNlc3Npb25Ub2tlbih0b2tlbik7XG59XG4iXSwibmFtZXMiOlsiand0IiwiY29va2llIiwiQ09PS0lFX05BTUUiLCJjcmVhdGVBZG1pblNlc3Npb25Ub2tlbiIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJBRE1JTl9TRVNTSU9OX1NFQ1JFVCIsIkVycm9yIiwicGF5bG9hZCIsInJvbGUiLCJzaWduIiwiZXhwaXJlc0luIiwidmVyaWZ5QWRtaW5TZXNzaW9uVG9rZW4iLCJ0b2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJlIiwiY3JlYXRlQWRtaW5Db29raWVIZWFkZXIiLCJzZXJpYWxpemUiLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwicGF0aCIsIm1heEFnZSIsInBhcnNlQWRtaW5Gcm9tUmVxdWVzdCIsImhlYWRlcnMiLCJjb29raWVIZWFkZXIiLCJnZXQiLCJjb29raWVzIiwicGFyc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./lib/bookings.js":
/*!*************************!*\
  !*** ./lib/bookings.js ***!
  \*************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBooking: () => (/* binding */ createBooking),\n/* harmony export */   hasBookingConflict: () => (/* binding */ hasBookingConflict),\n/* harmony export */   listBookings: () => (/* binding */ listBookings),\n/* harmony export */   updateBookingStatus: () => (/* binding */ updateBookingStatus)\n/* harmony export */ });\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.js\");\n\nasync function hasBookingConflict({ pavilionId, date, startTime, endTime }) {\n    const res = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT 1\n    FROM bookings\n    WHERE pavilion_id = $1\n      AND date = $2\n      AND NOT (\n        end_time <= $3\n        OR start_time >= $4\n      )\n    LIMIT 1;\n  `, [\n        pavilionId,\n        date,\n        startTime,\n        endTime\n    ]);\n    return res.rows.length > 0;\n}\nasync function createBooking({ pavilionId, date, startTime, endTime, totalPrice, customerName, phone, email, notes, extras }) {\n    const res = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    INSERT INTO bookings (\n      pavilion_id,\n      date,\n      start_time,\n      end_time,\n      total_price,\n      customer_name,\n      phone,\n      email,\n      notes,\n      extras,\n      status\n    )\n    VALUES (\n      $1, $2, $3, $4, $5,\n      $6, $7, $8, $9, $10, 'pending'\n    )\n    RETURNING *;\n  `, [\n        pavilionId,\n        date,\n        startTime,\n        endTime,\n        totalPrice,\n        customerName,\n        phone,\n        email,\n        notes || \"\",\n        extras ? JSON.stringify(extras) : null\n    ]);\n    return res.rows[0];\n}\nasync function listBookings({ fromDate, toDate, pavilionId } = {}) {\n    const conditions = [];\n    const params = [];\n    let idx = 1;\n    if (fromDate) {\n        conditions.push(`date >= $${idx++}`);\n        params.push(fromDate);\n    }\n    if (toDate) {\n        conditions.push(`date <= $${idx++}`);\n        params.push(toDate);\n    }\n    if (pavilionId) {\n        conditions.push(`pavilion_id = $${idx++}`);\n        params.push(pavilionId);\n    }\n    const whereClause = conditions.length ? `WHERE ${conditions.join(\" AND \")}` : \"\";\n    const res = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT\n      b.*,\n      p.name AS pavilion_name,\n      p.slug AS pavilion_slug\n    FROM bookings b\n    JOIN pavilions p ON p.id = b.pavilion_id\n    ${whereClause}\n    ORDER BY b.date DESC, b.start_time DESC;\n  `, params);\n    return res.rows.map((row)=>({\n            ...row,\n            extras: row.extras ? JSON.parse(row.extras) : null\n        }));\n}\nasync function updateBookingStatus(id, status) {\n    const res = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    UPDATE bookings\n    SET status = $2,\n        updated_at = NOW()\n    WHERE id = $1\n    RETURNING *;\n  `, [\n        id,\n        status\n    ]);\n    if (res.rows.length === 0) return null;\n    const row = res.rows[0];\n    return {\n        ...row,\n        extras: row.extras ? JSON.parse(row.extras) : null\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYm9va2luZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNkI7QUFFdEIsZUFBZUMsbUJBQW1CLEVBQ3ZDQyxVQUFVLEVBQ1ZDLElBQUksRUFDSkMsU0FBUyxFQUNUQyxPQUFPLEVBQ1I7SUFDQyxNQUFNQyxNQUFNLE1BQU1OLDBDQUFLQSxDQUNyQixDQUFDOzs7Ozs7Ozs7O0VBVUgsQ0FBQyxFQUNDO1FBQUNFO1FBQVlDO1FBQU1DO1FBQVdDO0tBQVE7SUFHeEMsT0FBT0MsSUFBSUMsSUFBSSxDQUFDQyxNQUFNLEdBQUc7QUFDM0I7QUFFTyxlQUFlQyxjQUFjLEVBQ2xDUCxVQUFVLEVBQ1ZDLElBQUksRUFDSkMsU0FBUyxFQUNUQyxPQUFPLEVBQ1BLLFVBQVUsRUFDVkMsWUFBWSxFQUNaQyxLQUFLLEVBQ0xDLEtBQUssRUFDTEMsS0FBSyxFQUNMQyxNQUFNLEVBQ1A7SUFDQyxNQUFNVCxNQUFNLE1BQU1OLDBDQUFLQSxDQUNyQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBbUJILENBQUMsRUFDQztRQUNFRTtRQUNBQztRQUNBQztRQUNBQztRQUNBSztRQUNBQztRQUNBQztRQUNBQztRQUNBQyxTQUFTO1FBQ1RDLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQ0YsVUFBVTtLQUNuQztJQUdILE9BQU9ULElBQUlDLElBQUksQ0FBQyxFQUFFO0FBQ3BCO0FBRU8sZUFBZVcsYUFBYSxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sRUFBRWxCLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN0RSxNQUFNbUIsYUFBYSxFQUFFO0lBQ3JCLE1BQU1DLFNBQVMsRUFBRTtJQUNqQixJQUFJQyxNQUFNO0lBRVYsSUFBSUosVUFBVTtRQUNaRSxXQUFXRyxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUVELE1BQU0sQ0FBQztRQUNuQ0QsT0FBT0UsSUFBSSxDQUFDTDtJQUNkO0lBQ0EsSUFBSUMsUUFBUTtRQUNWQyxXQUFXRyxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUVELE1BQU0sQ0FBQztRQUNuQ0QsT0FBT0UsSUFBSSxDQUFDSjtJQUNkO0lBQ0EsSUFBSWxCLFlBQVk7UUFDZG1CLFdBQVdHLElBQUksQ0FBQyxDQUFDLGVBQWUsRUFBRUQsTUFBTSxDQUFDO1FBQ3pDRCxPQUFPRSxJQUFJLENBQUN0QjtJQUNkO0lBRUEsTUFBTXVCLGNBQWNKLFdBQVdiLE1BQU0sR0FDakMsQ0FBQyxNQUFNLEVBQUVhLFdBQVdLLElBQUksQ0FBQyxTQUFTLENBQUMsR0FDbkM7SUFFSixNQUFNcEIsTUFBTSxNQUFNTiwwQ0FBS0EsQ0FDckIsQ0FBQzs7Ozs7OztJQU9ELEVBQUV5QixZQUFZOztFQUVoQixDQUFDLEVBQ0NIO0lBR0YsT0FBT2hCLElBQUlDLElBQUksQ0FBQ29CLEdBQUcsQ0FBQyxDQUFDQyxNQUFTO1lBQzVCLEdBQUdBLEdBQUc7WUFDTmIsUUFBUWEsSUFBSWIsTUFBTSxHQUFHQyxLQUFLYSxLQUFLLENBQUNELElBQUliLE1BQU0sSUFBSTtRQUNoRDtBQUNGO0FBRU8sZUFBZWUsb0JBQW9CQyxFQUFFLEVBQUVDLE1BQU07SUFDbEQsTUFBTTFCLE1BQU0sTUFBTU4sMENBQUtBLENBQ3JCLENBQUM7Ozs7OztFQU1ILENBQUMsRUFDQztRQUFDK0I7UUFBSUM7S0FBTztJQUdkLElBQUkxQixJQUFJQyxJQUFJLENBQUNDLE1BQU0sS0FBSyxHQUFHLE9BQU87SUFFbEMsTUFBTW9CLE1BQU10QixJQUFJQyxJQUFJLENBQUMsRUFBRTtJQUN2QixPQUFPO1FBQ0wsR0FBR3FCLEdBQUc7UUFDTmIsUUFBUWEsSUFBSWIsTUFBTSxHQUFHQyxLQUFLYSxLQUFLLENBQUNELElBQUliLE1BQU0sSUFBSTtJQUNoRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5pLWhhbWJhcmR6dW1pYW4tc3R1ZGlvcy8uL2xpYi9ib29raW5ncy5qcz9kYjczIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHF1ZXJ5IH0gZnJvbSBcIi4vZGJcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc0Jvb2tpbmdDb25mbGljdCh7XG4gIHBhdmlsaW9uSWQsXG4gIGRhdGUsXG4gIHN0YXJ0VGltZSxcbiAgZW5kVGltZVxufSkge1xuICBjb25zdCByZXMgPSBhd2FpdCBxdWVyeShcbiAgICBgXG4gICAgU0VMRUNUIDFcbiAgICBGUk9NIGJvb2tpbmdzXG4gICAgV0hFUkUgcGF2aWxpb25faWQgPSAkMVxuICAgICAgQU5EIGRhdGUgPSAkMlxuICAgICAgQU5EIE5PVCAoXG4gICAgICAgIGVuZF90aW1lIDw9ICQzXG4gICAgICAgIE9SIHN0YXJ0X3RpbWUgPj0gJDRcbiAgICAgIClcbiAgICBMSU1JVCAxO1xuICBgLFxuICAgIFtwYXZpbGlvbklkLCBkYXRlLCBzdGFydFRpbWUsIGVuZFRpbWVdXG4gICk7XG5cbiAgcmV0dXJuIHJlcy5yb3dzLmxlbmd0aCA+IDA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVCb29raW5nKHtcbiAgcGF2aWxpb25JZCxcbiAgZGF0ZSxcbiAgc3RhcnRUaW1lLFxuICBlbmRUaW1lLFxuICB0b3RhbFByaWNlLFxuICBjdXN0b21lck5hbWUsXG4gIHBob25lLFxuICBlbWFpbCxcbiAgbm90ZXMsXG4gIGV4dHJhc1xufSkge1xuICBjb25zdCByZXMgPSBhd2FpdCBxdWVyeShcbiAgICBgXG4gICAgSU5TRVJUIElOVE8gYm9va2luZ3MgKFxuICAgICAgcGF2aWxpb25faWQsXG4gICAgICBkYXRlLFxuICAgICAgc3RhcnRfdGltZSxcbiAgICAgIGVuZF90aW1lLFxuICAgICAgdG90YWxfcHJpY2UsXG4gICAgICBjdXN0b21lcl9uYW1lLFxuICAgICAgcGhvbmUsXG4gICAgICBlbWFpbCxcbiAgICAgIG5vdGVzLFxuICAgICAgZXh0cmFzLFxuICAgICAgc3RhdHVzXG4gICAgKVxuICAgIFZBTFVFUyAoXG4gICAgICAkMSwgJDIsICQzLCAkNCwgJDUsXG4gICAgICAkNiwgJDcsICQ4LCAkOSwgJDEwLCAncGVuZGluZydcbiAgICApXG4gICAgUkVUVVJOSU5HICo7XG4gIGAsXG4gICAgW1xuICAgICAgcGF2aWxpb25JZCxcbiAgICAgIGRhdGUsXG4gICAgICBzdGFydFRpbWUsXG4gICAgICBlbmRUaW1lLFxuICAgICAgdG90YWxQcmljZSxcbiAgICAgIGN1c3RvbWVyTmFtZSxcbiAgICAgIHBob25lLFxuICAgICAgZW1haWwsXG4gICAgICBub3RlcyB8fCBcIlwiLFxuICAgICAgZXh0cmFzID8gSlNPTi5zdHJpbmdpZnkoZXh0cmFzKSA6IG51bGxcbiAgICBdXG4gICk7XG5cbiAgcmV0dXJuIHJlcy5yb3dzWzBdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdEJvb2tpbmdzKHsgZnJvbURhdGUsIHRvRGF0ZSwgcGF2aWxpb25JZCB9ID0ge30pIHtcbiAgY29uc3QgY29uZGl0aW9ucyA9IFtdO1xuICBjb25zdCBwYXJhbXMgPSBbXTtcbiAgbGV0IGlkeCA9IDE7XG5cbiAgaWYgKGZyb21EYXRlKSB7XG4gICAgY29uZGl0aW9ucy5wdXNoKGBkYXRlID49ICQke2lkeCsrfWApO1xuICAgIHBhcmFtcy5wdXNoKGZyb21EYXRlKTtcbiAgfVxuICBpZiAodG9EYXRlKSB7XG4gICAgY29uZGl0aW9ucy5wdXNoKGBkYXRlIDw9ICQke2lkeCsrfWApO1xuICAgIHBhcmFtcy5wdXNoKHRvRGF0ZSk7XG4gIH1cbiAgaWYgKHBhdmlsaW9uSWQpIHtcbiAgICBjb25kaXRpb25zLnB1c2goYHBhdmlsaW9uX2lkID0gJCR7aWR4Kyt9YCk7XG4gICAgcGFyYW1zLnB1c2gocGF2aWxpb25JZCk7XG4gIH1cblxuICBjb25zdCB3aGVyZUNsYXVzZSA9IGNvbmRpdGlvbnMubGVuZ3RoXG4gICAgPyBgV0hFUkUgJHtjb25kaXRpb25zLmpvaW4oXCIgQU5EIFwiKX1gXG4gICAgOiBcIlwiO1xuXG4gIGNvbnN0IHJlcyA9IGF3YWl0IHF1ZXJ5KFxuICAgIGBcbiAgICBTRUxFQ1RcbiAgICAgIGIuKixcbiAgICAgIHAubmFtZSBBUyBwYXZpbGlvbl9uYW1lLFxuICAgICAgcC5zbHVnIEFTIHBhdmlsaW9uX3NsdWdcbiAgICBGUk9NIGJvb2tpbmdzIGJcbiAgICBKT0lOIHBhdmlsaW9ucyBwIE9OIHAuaWQgPSBiLnBhdmlsaW9uX2lkXG4gICAgJHt3aGVyZUNsYXVzZX1cbiAgICBPUkRFUiBCWSBiLmRhdGUgREVTQywgYi5zdGFydF90aW1lIERFU0M7XG4gIGAsXG4gICAgcGFyYW1zXG4gICk7XG5cbiAgcmV0dXJuIHJlcy5yb3dzLm1hcCgocm93KSA9PiAoe1xuICAgIC4uLnJvdyxcbiAgICBleHRyYXM6IHJvdy5leHRyYXMgPyBKU09OLnBhcnNlKHJvdy5leHRyYXMpIDogbnVsbFxuICB9KSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVCb29raW5nU3RhdHVzKGlkLCBzdGF0dXMpIHtcbiAgY29uc3QgcmVzID0gYXdhaXQgcXVlcnkoXG4gICAgYFxuICAgIFVQREFURSBib29raW5nc1xuICAgIFNFVCBzdGF0dXMgPSAkMixcbiAgICAgICAgdXBkYXRlZF9hdCA9IE5PVygpXG4gICAgV0hFUkUgaWQgPSAkMVxuICAgIFJFVFVSTklORyAqO1xuICBgLFxuICAgIFtpZCwgc3RhdHVzXVxuICApO1xuXG4gIGlmIChyZXMucm93cy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IHJvdyA9IHJlcy5yb3dzWzBdO1xuICByZXR1cm4ge1xuICAgIC4uLnJvdyxcbiAgICBleHRyYXM6IHJvdy5leHRyYXMgPyBKU09OLnBhcnNlKHJvdy5leHRyYXMpIDogbnVsbFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInF1ZXJ5IiwiaGFzQm9va2luZ0NvbmZsaWN0IiwicGF2aWxpb25JZCIsImRhdGUiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwicmVzIiwicm93cyIsImxlbmd0aCIsImNyZWF0ZUJvb2tpbmciLCJ0b3RhbFByaWNlIiwiY3VzdG9tZXJOYW1lIiwicGhvbmUiLCJlbWFpbCIsIm5vdGVzIiwiZXh0cmFzIiwiSlNPTiIsInN0cmluZ2lmeSIsImxpc3RCb29raW5ncyIsImZyb21EYXRlIiwidG9EYXRlIiwiY29uZGl0aW9ucyIsInBhcmFtcyIsImlkeCIsInB1c2giLCJ3aGVyZUNsYXVzZSIsImpvaW4iLCJtYXAiLCJyb3ciLCJwYXJzZSIsInVwZGF0ZUJvb2tpbmdTdGF0dXMiLCJpZCIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/bookings.js\n");

/***/ }),

/***/ "(rsc)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closePool: () => (/* binding */ closePool),\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n\nconst { DATABASE_URL, PGSSL } = process.env;\nif (!DATABASE_URL || /USER|PASS|HOST|DB_NAME/.test(DATABASE_URL)) {\n    throw new Error(\"DATABASE_URL is not configured. Edit your .env and set a real Postgres URL, e.g. postgres://postgres:postgres@127.0.0.1:5432/ani_hambardzumian_studios\");\n}\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n    connectionString: DATABASE_URL,\n    ssl: PGSSL === \"true\" ? {\n        rejectUnauthorized: false\n    } : false\n});\nasync function query(text, params = []) {\n    const client = await pool.connect();\n    try {\n        const res = await client.query(text, params);\n        return res;\n    } finally{\n        client.release();\n    }\n}\nasync function closePool() {\n    await pool.end();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBCO0FBRTFCLE1BQU0sRUFBRUMsWUFBWSxFQUFFQyxLQUFLLEVBQUUsR0FBR0MsUUFBUUMsR0FBRztBQUUzQyxJQUFJLENBQUNILGdCQUFnQix5QkFBeUJJLElBQUksQ0FBQ0osZUFBZTtJQUNoRSxNQUFNLElBQUlLLE1BQ1I7QUFFSjtBQUVBLE1BQU1DLE9BQU8sSUFBSVAsb0NBQUlBLENBQUM7SUFDcEJRLGtCQUFrQlA7SUFDbEJRLEtBQUtQLFVBQVUsU0FBUztRQUFFUSxvQkFBb0I7SUFBTSxJQUFJO0FBQzFEO0FBRU8sZUFBZUMsTUFBTUMsSUFBSSxFQUFFQyxTQUFTLEVBQUU7SUFDM0MsTUFBTUMsU0FBUyxNQUFNUCxLQUFLUSxPQUFPO0lBQ2pDLElBQUk7UUFDRixNQUFNQyxNQUFNLE1BQU1GLE9BQU9ILEtBQUssQ0FBQ0MsTUFBTUM7UUFDckMsT0FBT0c7SUFDVCxTQUFVO1FBQ1JGLE9BQU9HLE9BQU87SUFDaEI7QUFDRjtBQUVPLGVBQWVDO0lBQ3BCLE1BQU1YLEtBQUtZLEdBQUc7QUFDaEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmktaGFtYmFyZHp1bWlhbi1zdHVkaW9zLy4vbGliL2RiLmpzPzNkYzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9vbCB9IGZyb20gXCJwZ1wiO1xuXG5jb25zdCB7IERBVEFCQVNFX1VSTCwgUEdTU0wgfSA9IHByb2Nlc3MuZW52O1xuXG5pZiAoIURBVEFCQVNFX1VSTCB8fCAvVVNFUnxQQVNTfEhPU1R8REJfTkFNRS8udGVzdChEQVRBQkFTRV9VUkwpKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBcIkRBVEFCQVNFX1VSTCBpcyBub3QgY29uZmlndXJlZC4gRWRpdCB5b3VyIC5lbnYgYW5kIHNldCBhIHJlYWwgUG9zdGdyZXMgVVJMLCBlLmcuIHBvc3RncmVzOi8vcG9zdGdyZXM6cG9zdGdyZXNAMTI3LjAuMC4xOjU0MzIvYW5pX2hhbWJhcmR6dW1pYW5fc3R1ZGlvc1wiXG4gICk7XG59XG5cbmNvbnN0IHBvb2wgPSBuZXcgUG9vbCh7XG4gIGNvbm5lY3Rpb25TdHJpbmc6IERBVEFCQVNFX1VSTCxcbiAgc3NsOiBQR1NTTCA9PT0gXCJ0cnVlXCIgPyB7IHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2UgfSA6IGZhbHNlXG59KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5KHRleHQsIHBhcmFtcyA9IFtdKSB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5xdWVyeSh0ZXh0LCBwYXJhbXMpO1xuICAgIHJldHVybiByZXM7XG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xvc2VQb29sKCkge1xuICBhd2FpdCBwb29sLmVuZCgpO1xufVxuIl0sIm5hbWVzIjpbIlBvb2wiLCJEQVRBQkFTRV9VUkwiLCJQR1NTTCIsInByb2Nlc3MiLCJlbnYiLCJ0ZXN0IiwiRXJyb3IiLCJwb29sIiwiY29ubmVjdGlvblN0cmluZyIsInNzbCIsInJlamVjdFVuYXV0aG9yaXplZCIsInF1ZXJ5IiwidGV4dCIsInBhcmFtcyIsImNsaWVudCIsImNvbm5lY3QiLCJyZXMiLCJyZWxlYXNlIiwiY2xvc2VQb29sIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.js\n");

/***/ }),

/***/ "(rsc)/./lib/pavilions.js":
/*!**************************!*\
  !*** ./lib/pavilions.js ***!
  \**************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllPavilions: () => (/* binding */ getAllPavilions),\n/* harmony export */   getPavilionBookingsUpcoming: () => (/* binding */ getPavilionBookingsUpcoming),\n/* harmony export */   getPavilionBySlug: () => (/* binding */ getPavilionBySlug)\n/* harmony export */ });\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.js\");\n\nasync function getAllPavilions() {\n    const res = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT\n      id,\n      slug,\n      name,\n      description,\n      price_per_hour,\n      area_sqm,\n      ceiling_height,\n      capacity,\n      location,\n      features,\n      main_image_url,\n      gallery_image_urls\n    FROM pavilions\n    ORDER BY id ASC;\n  `);\n    return res.rows.map((row)=>({\n            ...row,\n            features: row.features ? JSON.parse(row.features) : null,\n            gallery_image_urls: row.gallery_image_urls ? JSON.parse(row.gallery_image_urls) : []\n        }));\n}\nasync function getPavilionBySlug(slug) {\n    const res = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT\n      id,\n      slug,\n      name,\n      description,\n      price_per_hour,\n      area_sqm,\n      ceiling_height,\n      capacity,\n      location,\n      features,\n      main_image_url,\n      gallery_image_urls\n    FROM pavilions\n    WHERE slug = $1\n    LIMIT 1;\n  `, [\n        slug\n    ]);\n    if (res.rows.length === 0) return null;\n    const row = res.rows[0];\n    return {\n        ...row,\n        features: row.features ? JSON.parse(row.features) : null,\n        gallery_image_urls: row.gallery_image_urls ? JSON.parse(row.gallery_image_urls) : []\n    };\n}\nasync function getPavilionBookingsUpcoming(pavilionId, daysAhead = 30) {\n    const res = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT\n      id,\n      date,\n      start_time,\n      end_time,\n      status\n    FROM bookings\n    WHERE pavilion_id = $1\n      AND date >= CURRENT_DATE\n      AND date <= CURRENT_DATE + $2::integer\n    ORDER BY date ASC, start_time ASC;\n  `, [\n        pavilionId,\n        daysAhead\n    ]);\n    return res.rows;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcGF2aWxpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkI7QUFFdEIsZUFBZUM7SUFDcEIsTUFBTUMsTUFBTSxNQUFNRiwwQ0FBS0EsQ0FDckIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7OztFQWdCSCxDQUFDO0lBRUQsT0FBT0UsSUFBSUMsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQ0MsTUFBUztZQUM1QixHQUFHQSxHQUFHO1lBQ05DLFVBQVVELElBQUlDLFFBQVEsR0FBR0MsS0FBS0MsS0FBSyxDQUFDSCxJQUFJQyxRQUFRLElBQUk7WUFDcERHLG9CQUFvQkosSUFBSUksa0JBQWtCLEdBQ3RDRixLQUFLQyxLQUFLLENBQUNILElBQUlJLGtCQUFrQixJQUNqQyxFQUFFO1FBQ1I7QUFDRjtBQUVPLGVBQWVDLGtCQUFrQkMsSUFBSTtJQUMxQyxNQUFNVCxNQUFNLE1BQU1GLDBDQUFLQSxDQUNyQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7OztFQWlCSCxDQUFDLEVBQ0M7UUFBQ1c7S0FBSztJQUdSLElBQUlULElBQUlDLElBQUksQ0FBQ1MsTUFBTSxLQUFLLEdBQUcsT0FBTztJQUVsQyxNQUFNUCxNQUFNSCxJQUFJQyxJQUFJLENBQUMsRUFBRTtJQUV2QixPQUFPO1FBQ0wsR0FBR0UsR0FBRztRQUNOQyxVQUFVRCxJQUFJQyxRQUFRLEdBQUdDLEtBQUtDLEtBQUssQ0FBQ0gsSUFBSUMsUUFBUSxJQUFJO1FBQ3BERyxvQkFBb0JKLElBQUlJLGtCQUFrQixHQUN0Q0YsS0FBS0MsS0FBSyxDQUFDSCxJQUFJSSxrQkFBa0IsSUFDakMsRUFBRTtJQUNSO0FBQ0Y7QUFFTyxlQUFlSSw0QkFBNEJDLFVBQVUsRUFBRUMsWUFBWSxFQUFFO0lBQzFFLE1BQU1iLE1BQU0sTUFBTUYsMENBQUtBLENBQ3JCLENBQUM7Ozs7Ozs7Ozs7OztFQVlILENBQUMsRUFDQztRQUFDYztRQUFZQztLQUFVO0lBR3pCLE9BQU9iLElBQUlDLElBQUk7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmktaGFtYmFyZHp1bWlhbi1zdHVkaW9zLy4vbGliL3BhdmlsaW9ucy5qcz84YzczIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHF1ZXJ5IH0gZnJvbSBcIi4vZGJcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFBhdmlsaW9ucygpIHtcbiAgY29uc3QgcmVzID0gYXdhaXQgcXVlcnkoXG4gICAgYFxuICAgIFNFTEVDVFxuICAgICAgaWQsXG4gICAgICBzbHVnLFxuICAgICAgbmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgcHJpY2VfcGVyX2hvdXIsXG4gICAgICBhcmVhX3NxbSxcbiAgICAgIGNlaWxpbmdfaGVpZ2h0LFxuICAgICAgY2FwYWNpdHksXG4gICAgICBsb2NhdGlvbixcbiAgICAgIGZlYXR1cmVzLFxuICAgICAgbWFpbl9pbWFnZV91cmwsXG4gICAgICBnYWxsZXJ5X2ltYWdlX3VybHNcbiAgICBGUk9NIHBhdmlsaW9uc1xuICAgIE9SREVSIEJZIGlkIEFTQztcbiAgYFxuICApO1xuICByZXR1cm4gcmVzLnJvd3MubWFwKChyb3cpID0+ICh7XG4gICAgLi4ucm93LFxuICAgIGZlYXR1cmVzOiByb3cuZmVhdHVyZXMgPyBKU09OLnBhcnNlKHJvdy5mZWF0dXJlcykgOiBudWxsLFxuICAgIGdhbGxlcnlfaW1hZ2VfdXJsczogcm93LmdhbGxlcnlfaW1hZ2VfdXJsc1xuICAgICAgPyBKU09OLnBhcnNlKHJvdy5nYWxsZXJ5X2ltYWdlX3VybHMpXG4gICAgICA6IFtdXG4gIH0pKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhdmlsaW9uQnlTbHVnKHNsdWcpIHtcbiAgY29uc3QgcmVzID0gYXdhaXQgcXVlcnkoXG4gICAgYFxuICAgIFNFTEVDVFxuICAgICAgaWQsXG4gICAgICBzbHVnLFxuICAgICAgbmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgcHJpY2VfcGVyX2hvdXIsXG4gICAgICBhcmVhX3NxbSxcbiAgICAgIGNlaWxpbmdfaGVpZ2h0LFxuICAgICAgY2FwYWNpdHksXG4gICAgICBsb2NhdGlvbixcbiAgICAgIGZlYXR1cmVzLFxuICAgICAgbWFpbl9pbWFnZV91cmwsXG4gICAgICBnYWxsZXJ5X2ltYWdlX3VybHNcbiAgICBGUk9NIHBhdmlsaW9uc1xuICAgIFdIRVJFIHNsdWcgPSAkMVxuICAgIExJTUlUIDE7XG4gIGAsXG4gICAgW3NsdWddXG4gICk7XG5cbiAgaWYgKHJlcy5yb3dzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3Qgcm93ID0gcmVzLnJvd3NbMF07XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5yb3csXG4gICAgZmVhdHVyZXM6IHJvdy5mZWF0dXJlcyA/IEpTT04ucGFyc2Uocm93LmZlYXR1cmVzKSA6IG51bGwsXG4gICAgZ2FsbGVyeV9pbWFnZV91cmxzOiByb3cuZ2FsbGVyeV9pbWFnZV91cmxzXG4gICAgICA/IEpTT04ucGFyc2Uocm93LmdhbGxlcnlfaW1hZ2VfdXJscylcbiAgICAgIDogW11cbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhdmlsaW9uQm9va2luZ3NVcGNvbWluZyhwYXZpbGlvbklkLCBkYXlzQWhlYWQgPSAzMCkge1xuICBjb25zdCByZXMgPSBhd2FpdCBxdWVyeShcbiAgICBgXG4gICAgU0VMRUNUXG4gICAgICBpZCxcbiAgICAgIGRhdGUsXG4gICAgICBzdGFydF90aW1lLFxuICAgICAgZW5kX3RpbWUsXG4gICAgICBzdGF0dXNcbiAgICBGUk9NIGJvb2tpbmdzXG4gICAgV0hFUkUgcGF2aWxpb25faWQgPSAkMVxuICAgICAgQU5EIGRhdGUgPj0gQ1VSUkVOVF9EQVRFXG4gICAgICBBTkQgZGF0ZSA8PSBDVVJSRU5UX0RBVEUgKyAkMjo6aW50ZWdlclxuICAgIE9SREVSIEJZIGRhdGUgQVNDLCBzdGFydF90aW1lIEFTQztcbiAgYCxcbiAgICBbcGF2aWxpb25JZCwgZGF5c0FoZWFkXVxuICApO1xuXG4gIHJldHVybiByZXMucm93cztcbn1cbiJdLCJuYW1lcyI6WyJxdWVyeSIsImdldEFsbFBhdmlsaW9ucyIsInJlcyIsInJvd3MiLCJtYXAiLCJyb3ciLCJmZWF0dXJlcyIsIkpTT04iLCJwYXJzZSIsImdhbGxlcnlfaW1hZ2VfdXJscyIsImdldFBhdmlsaW9uQnlTbHVnIiwic2x1ZyIsImxlbmd0aCIsImdldFBhdmlsaW9uQm9va2luZ3NVcGNvbWluZyIsInBhdmlsaW9uSWQiLCJkYXlzQWhlYWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/pavilions.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/cookie","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbookings%2Froute&page=%2Fapi%2Fbookings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbookings%2Froute.js&appDir=%2FUsers%2Fmeritsaturyan%2FDesktop%2Fanihambardzumyan%2Fani-hambardzumian-studios%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmeritsaturyan%2FDesktop%2Fanihambardzumyan%2Fani-hambardzumian-studios&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();