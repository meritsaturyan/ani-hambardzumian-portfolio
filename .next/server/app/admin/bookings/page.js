(()=>{var e={};e.id=424,e.ids=[424],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1107:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(995),s(1754),s(899),s(5866);var a=s(3191),n=s(8716),r=s(7922),i=s.n(r),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,995)),"/Users/meritsaturyan/Desktop/anihambardzumyan/ani-hambardzumian-studios/app/admin/bookings/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1754)),"/Users/meritsaturyan/Desktop/anihambardzumyan/ani-hambardzumian-studios/app/admin/layout.js"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,899)),"/Users/meritsaturyan/Desktop/anihambardzumyan/ani-hambardzumian-studios/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/meritsaturyan/Desktop/anihambardzumyan/ani-hambardzumian-studios/app/admin/bookings/page.js"],x="/admin/bookings/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/bookings/page",pathname:"/admin/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5809:(e,t,s)=>{Promise.resolve().then(s.bind(s,3220))},2759:()=>{},4737:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5563:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23))},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7272:()=>{},3220:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(326),n=s(7577),r=s(5047),i=s(1786),l=s(9823);function o(){let e=(0,r.useRouter)();(0,r.useSearchParams)();let[t,s]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[c,x]=(0,n.useState)("");return(0,a.jsxs)("form",{onSubmit:function(s){s.preventDefault();let a=new URLSearchParams;t&&a.set("from",t),o&&a.set("to",o),c&&a.set("pavilionId",c);let n=a.toString();e.push(`/admin/bookings${n?"?"+n:""}`)},className:"flex flex-wrap gap-3 items-end bg-white/5 border border-white/10 rounded-2xl p-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1 min-w-[140px]",children:[a.jsx("label",{className:"text-[11px] uppercase tracking-[0.16em] text-white/50",children:"From date"}),a.jsx(i.Z,{type:"date",value:t,onChange:e=>s(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 min-w-[140px]",children:[a.jsx("label",{className:"text-[11px] uppercase tracking-[0.16em] text-white/50",children:"To date"}),a.jsx(i.Z,{type:"date",value:o,onChange:e=>d(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 min-w-[140px]",children:[a.jsx("label",{className:"text-[11px] uppercase tracking-[0.16em] text-white/50",children:"Pavilion ID"}),a.jsx(i.Z,{type:"number",min:1,value:c,onChange:e=>x(e.target.value),placeholder:"Any"})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-auto",children:[a.jsx(l.Z,{type:"submit",size:"sm",children:"Apply"}),a.jsx(l.Z,{type:"button",variant:"ghost",size:"sm",onClick:function(){s(""),d(""),x(""),e.push("/admin/bookings")},children:"Reset"})]})]})}function d({bookings:e,loading:t,onSelectBooking:s,onStatusChanged:n}){async function r(e,t){try{(await fetch(`/api/bookings/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok?n?.():console.error("Failed to update status")}catch(e){console.error("Failed to update status",e)}}return a.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 overflow-hidden",children:a.jsx("div",{className:"max-h-[480px] overflow-auto",children:(0,a.jsxs)("table",{className:"w-full text-xs md:text-sm",children:[a.jsx("thead",{className:"bg-white/5 text-white/60",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Date"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Time"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Pavilion"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Customer"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Contacts"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Total"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[t&&a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"px-3 py-4 text-center text-white/60",children:"Loading..."})}),!t&&0===e.length&&a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"px-3 py-4 text-center text-white/60",children:"No bookings found."})}),e.map(e=>(0,a.jsxs)("tr",{className:"border-t border-white/10",children:[a.jsx("td",{className:"px-3 py-2",children:new Date(e.date).toLocaleDateString("en-GB")}),(0,a.jsxs)("td",{className:"px-3 py-2",children:[e.start_time," – ",e.end_time]}),(0,a.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.pavilion_name," (#",e.pavilion_id,")"]}),a.jsx("td",{className:"px-3 py-2",children:e.customer_name}),(0,a.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap",children:[a.jsx("div",{children:e.phone}),a.jsx("div",{className:"text-white/60",children:e.email})]}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:new Intl.NumberFormat("hy-AM",{style:"currency",currency:"AMD",maximumFractionDigits:0}).format(e.total_price||0)}),a.jsx("td",{className:"px-3 py-2 capitalize",children:e.status}),(0,a.jsxs)("td",{className:"px-3 py-2 text-right space-x-1",children:[a.jsx(l.Z,{size:"xs",variant:"ghost",onClick:()=>s?.(e),children:"View"}),a.jsx(l.Z,{size:"xs",variant:"confirmed"===e.status?"ghost":"outline",onClick:()=>r(e.id,"confirmed"),children:"Confirm"}),a.jsx(l.Z,{size:"xs",variant:"cancelled"===e.status?"ghost":"outline",onClick:()=>r(e.id,"cancelled"),children:"Cancel"})]})]},e.id))]})]})})})}function c({booking:e,onClose:t}){return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,a.jsxs)("div",{className:"bg-brand-bg border border-white/15 rounded-2xl shadow-soft max-w-md w-full mx-4 p-5 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Booking details"}),a.jsx("button",{type:"button",onClick:t,className:"text-white/60 hover:text-white text-xs",children:"Close"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-xs md:text-sm",children:[(0,a.jsxs)(x,{label:"Pavilion",children:[e.pavilion_name," (#",e.pavilion_id,")"]}),(0,a.jsxs)(x,{label:"Date",children:[new Date(e.date).toLocaleDateString("en-GB")," \xb7"," ",e.start_time,"–",e.end_time]}),a.jsx(x,{label:"Customer",children:e.customer_name}),a.jsx(x,{label:"Phone",children:e.phone}),a.jsx(x,{label:"Email",children:e.email}),a.jsx(x,{label:"Total",children:new Intl.NumberFormat("hy-AM",{style:"currency",currency:"AMD",maximumFractionDigits:0}).format(e.total_price||0)}),a.jsx(x,{label:"Status",valueClass:"capitalize",children:e.status}),e.notes&&a.jsx(x,{label:"Notes",children:e.notes}),e.extras&&a.jsx(x,{label:"Extras",children:a.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:JSON.stringify(e.extras,null,2)})})]}),a.jsx("div",{className:"mt-4 text-right",children:a.jsx(l.Z,{size:"sm",variant:"ghost",onClick:t,children:"Close"})})]})}):null}function x({label:e,children:t,valueClass:s}){return(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("div",{className:"w-24 text-white/50 text-xs uppercase tracking-[0.16em]",children:e}),a.jsx("div",{className:`flex-1 ${s||""}`,children:t})]})}var m=s(8935);function u(){let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),[s,i]=(0,n.useState)([]),[l,x]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[p,b]=(0,n.useState)(null);async function f(){h(!0),x("");try{let s=new URLSearchParams(t.toString()),a=await fetch(`/api/bookings?${s.toString()}`,{credentials:"include"});if(401===a.status){e.push("/admin/login");return}if(!a.ok){let e=await a.json().catch(()=>({}));x(e.error||"Failed to load bookings");return}let n=await a.json();i(n.bookings||[])}catch(e){x("Failed to load bookings")}finally{h(!1)}}return(0,n.useEffect)(()=>{f()},[t.toString()]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Bookings"}),a.jsx("p",{className:"text-white/60 mt-1",children:"Manage studio bookings, confirm or cancel requests."})]}),a.jsx(o,{}),l&&a.jsx(m.Z,{variant:"error",children:l}),a.jsx(d,{bookings:s,loading:u,onSelectBooking:b,onStatusChanged:f}),p&&a.jsx(c,{booking:p,onClose:()=>b(null)})]})}function h(){return a.jsx(n.Suspense,{fallback:a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Bookings"}),a.jsx("p",{className:"text-white/60 mt-1",children:"Loading bookings, please wait..."})]})}),children:a.jsx(u,{})})}},8935:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(326),n=s(1135);let r={error:"border-red-400/60 bg-red-500/10 text-red-100",success:"border-emerald-400/60 bg-emerald-500/10 text-emerald-100",info:"border-brand.accent/60 bg-brand.accent/10 text-brand.accent"};function i({children:e,variant:t="info",className:s}){return a.jsx("div",{className:(0,n.Z)("rounded-xl border px-3 py-2 text-xs md:text-sm",r[t],s),children:e})}},9823:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(326),n=s(1135);let r={solid:"bg-brand.primary text-black hover:bg-brand.primaryDark",outline:"border border-white/30 text-white hover:bg-white/10",ghost:"text-white/70 hover:bg-white/10"},i={sm:"px-3 py-1.5",md:"px-4 py-2",xs:"px-2 py-1 text-[11px]"};function l({children:e,variant:t="solid",size:s="md",className:l,...o}){return a.jsx("button",{className:(0,n.Z)("inline-flex items-center justify-center rounded-full text-xs md:text-sm font-medium transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-black",r[t],i[s],l),...o,children:e})}},1786:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(326);function n({className:e="",...t}){return a.jsx("input",{className:`w-full bg-black/40 border border-white/15 rounded-xl px-3 py-2 text-sm outline-none focus:border-brand.primary focus:ring-1 focus:ring-brand.primary ${e}`,...t})}},1135:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=function(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=function e(t){var s,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(a=e(t[s]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(a&&(a+=" "),a+=t);return a}},995:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});var a=s(8570);let n=(0,a.createProxy)(String.raw`/Users/meritsaturyan/Desktop/anihambardzumyan/ani-hambardzumian-studios/app/admin/bookings/page.js`),{__esModule:r,$$typeof:i}=n;n.default;let l=(0,a.createProxy)(String.raw`/Users/meritsaturyan/Desktop/anihambardzumyan/ani-hambardzumian-studios/app/admin/bookings/page.js#default`)},1754:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>i});var a=s(9510);s(7272);var n=s(7371);function r(){return a.jsx("header",{className:"fixed top-0 inset-x-0 z-40 bg-black/80 backdrop-blur border-b border-white/10",children:(0,a.jsxs)("div",{className:"container-page flex items-center justify-between h-16",children:[(0,a.jsxs)(n.default,{href:"/admin",className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-brand.primary"}),(0,a.jsxs)("div",{className:"leading-tight",children:[a.jsx("div",{className:"font-display font-semibold text-sm",children:"Ani Hambardzumian"}),a.jsx("div",{className:"text-[11px] text-white/60",children:"Admin"})]})]}),(0,a.jsxs)("nav",{className:"flex items-center gap-4 text-xs",children:[a.jsx(n.default,{href:"/admin/bookings",className:"hover:text-brand.primary",children:"Bookings"}),a.jsx(n.default,{href:"/",className:"text-white/60 hover:text-white",children:"Back to site"})]})]})})}let i={title:"Admin – Ani Hambardzumian Studios"};function l({children:e}){return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-brand-bg text-white",children:[a.jsx(r,{}),a.jsx("main",{className:"flex-1 pt-20",children:a.jsx("div",{className:"container-page py-8",children:e})})]})}},899:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r,metadata:()=>n});var a=s(9510);s(7272);let n={title:"Ani Hambardzumian Studios",description:"Photo & video studio pavilions in Yerevan"};function r({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:"bg-white text-slate-900",children:e})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,471,783],()=>s(1107));module.exports=a})();